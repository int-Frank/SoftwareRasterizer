//================================================================================
// @ CommonMath.cpp
// 
// Description: 
//
// This files contains some useful math constant definitions.
//
// -------------------------------------------------------------------------------
//
// Author: Frank Hart
// Date last modified: 2013
//
//================================================================================

#include "CommonMath.h"

//--------------------------------------------------------------------------------
//		Constants
//--------------------------------------------------------------------------------
const float PI				= 3.141592653589793238462643383279f;
const float TwoPI			= 6.283185307179586476925286766559f;
const float HalfPI			= 1.570796326794896619231321691639f;
const float OneOverPI		= 0.31830988618379067153776752674503f;
const float EPSILON			= 1.0e-4f;
const float RAND_MAX_FLOAT	= float(RAND_MAX);


//--------------------------------------------------------------------------------
//		This list is used by the DgLog2 function
//--------------------------------------------------------------------------------
static const uint32 TAB32[32] = {
	0, 9, 1, 10, 13, 21, 2, 29,
	11, 14, 16, 18, 22, 25, 3, 30,
	8, 12, 20, 28, 15, 17, 24, 7,
	19, 27, 23, 6, 26, 5, 4, 31 };


//--------------------------------------------------------------------------------
//	@	DgLog2()
//--------------------------------------------------------------------------------
//		Finds log2 of a number
//--------------------------------------------------------------------------------
uint32 DgLog2(uint32 input)
{
	input |= (input >> 1);
	input |= (input >> 2);
	input |= (input >> 4);
	input |= (input >> 8);
	input |= (input >> 16);
	return TAB32[(input * 0x07C4ACDD) >> 27];

}	//End: DgLog2()


//--------------------------------------------------------------------------------
//	@	FloorPower2()
//--------------------------------------------------------------------------------
//		Floors a number to the nearest power of 2
//--------------------------------------------------------------------------------
uint32 FloorPower2(uint32 input)
{
	input |= (input >> 1);
	input |= (input >> 2);
	input |= (input >> 4);
	input |= (input >> 8);
	input |= (input >> 16);
	input -= (input >> 1);
	return input;

}	//End: FloorPower2()